<!-- <ng-container *ngIf="loaderService.isLoading | async">
  <div class="lds-ripple"><div></div><div></div></div>
 </ng-container> -->

<div class="container-fluid">

<br>
<br>
<form [formGroup]="updateCustomerForm" (ngSubmit)="onSubmit();">
  <!-- Page Heading -->
  <!-- Content Row -->
  <div class="row">

      <!-- Grow In Utility -->
      <div class="col-lg-6">

          <div class="card position-relative">
            <div class="card-header py-3" style="background-color: #4e73df;">
              <h2 class="m-0 " style="color: white;">Phân loại khách hàng</h2>
              </div>
              <div class="card-body">
                <div class="custom-control custom-radio custom-control-inline">
                  <input type="radio" id="customRadioInline1" name="leadSource"  value="PRIVATE" class="custom-control-input" formControlName="leadSource">
                  <label class="custom-control-label text-gray-900" for="customRadioInline1" >KH cá nhân</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline">
                  <input type="radio" id="customRadioInline2" name="leadSource" value="ENTERPRISE" formControlName="leadSource" class="custom-control-input">
                  <label class="custom-control-label text-gray-900" for="customRadioInline2" >KH doanh nghiệp</label>
                </div>
              </div>


            <div class="container">
              <div  class="row ">
                <div  class="col-md-12 ">
                    <div  style="padding: 2% 0 1.9%;" class="row ">
                        <div  class="col-md-12"> <span  class="z-label">Sản phẩm kinh doanh</span> </div>
                    </div>
                    <div  class="row ">
                      <ng-container formArrayName="industry">
                        <div  class="col-md-6 "
                        *ngFor="let b of industryFormArray.controls; let index = index">
                          <input  type="checkbox" [formControl]="b" (change)="getSelectedIndustryValue()" >
                          <label  class="text-gray-900 ml-2"> {{industryData[index].name}}</label></div>
                          <small class="text-danger"
                          *ngIf="industryError ">
                              Chọn ít nhất 1 sản phẩm kinh doanh</small>
                      </ng-container>
                    </div>
                </div>
            </div>
            </div>

<br>
<br>


          </div>

      </div>

      <!-- Fade In Utility -->
      <div class="col-lg-6">

        <div class="card position-relative">
          <div class="card-header py-3" style="background-color: #4e73df;">
            <h2 class="m-0 " style="color: white;">Thông tin khách hàng</h2>
            </div>
            <div class="card-body">

              <div  class="row z-div ">
                <div  class="col-md-6 z-div">
                    <div  class="z-vlayout" >
                        <div  class="z-vlayout-inner" style="padding-bottom:0">
                            <div  class="z-div"> <span  class="z-label text-gray-900">Tên cửa hàng/ công ty</span> </div>
                        </div>
                        <div  class="z-vlayout-inner" >
                          <input [ngClass]="{'is-valid': !companyNameArray.errors?.['required'] && !companyNameArray.errors?.['minlength']}"
                           formControlName="companyName" class="form-control" value="" type="text" maxlength="100" placeholder="Nhập tên cửa hàng" ></div>
                        <div *ngFor="let validation of updateCustomerMessage.companyName">
                          <small class="text-danger"   *ngIf="updateCustomerForm.get('companyName')?.hasError(validation.type) && updateCustomerForm.get('companyName').touched">
                           {{validation.message}}</small>
                        </div>
                    </div>
                </div>
                <div  class="col-md-6 z-div">
                    <div  class="z-vlayout" >
                        <div  class="z-vlayout-inner" style="padding-bottom:0">
                            <div  class="z-div"> <span  class="z-label text-gray-900">Chức danh</span> </div>
                        </div>
                        <div  class="z-vlayout-inner" >
                          <input [ngClass]="{'is-valid': !titleArray.errors?.['required'] && !titleArray.errors?.['minlength']}"
                           formControlName="title"  class="form-control" value="" type="text" maxlength="100" placeholder="Nhập chức danh" ></div>
                        <div *ngFor="let validation of updateCustomerMessage.title">
                          <small class="text-danger"   *ngIf="updateCustomerForm.get('title')?.hasError(validation.type) && updateCustomerForm.get('title').touched">
                           {{validation.message}}</small>
                        </div>
                      </div>
                </div>
            </div>

            <div  class="row z-div mt-3">
              <div  class="col-md-6 z-div">
                  <div  class="z-vlayout" >
                      <div  class="z-vlayout-inner" style="padding-bottom:0">
                          <div  class="z-div"> <span  class="z-label text-gray-900">Họ và tên</span> </div>
                      </div>
                      <div class="z-vlayout-inner" >
                        <input [ngClass]="{'is-valid': !representationArray.errors?.['required'] && !representationArray.errors?.['minlength']}"
                         formControlName="representation"  class="form-control" value="" type="text" maxlength="100" placeholder="Nhập người liên hệ" ></div>
                      <div *ngFor="let validation of updateCustomerMessage.representation">
                        <small class="text-danger"   *ngIf="updateCustomerForm.get('representation')?.hasError(validation.type) && updateCustomerForm.get('representation').touched">
                         {{validation.message}}</small>
                      </div>
                    </div>
              </div>
              <div  class="col-md-6 z-div">
                  <div  class="z-vlayout" >
                      <div  class="z-vlayout-inner" style="padding-bottom:0">
                          <div  class="z-div"> <span  class="z-label text-gray-900">Số điện thoại</span> </div>
                      </div>
                      <div  class="z-vlayout-inner" >
                        <input [ngClass]="{'is-valid': !phoneArray.errors?.['required'] && !phoneArray.errors?.['minlength']}"
                        formControlName="phone" class="form-control" value="" appPhoneNumber type="text" maxlength="12" placeholder="Nhập số điện thoại" ></div>
                      <div *ngFor="let validation of updateCustomerMessage.phone">
                        <small class="text-danger"   *ngIf="updateCustomerForm.get('phone')?.hasError(validation.type) && updateCustomerForm.get('phone').touched">
                         {{validation.message}}</small>
                      </div>
                    </div>
              </div>
          </div>

          <div  class="row z-div  mt-3">
            <div  class="col-md-6 z-div">
                <div  class="z-vlayout" >
                    <div  class="z-vlayout-inner" style="padding-bottom:0">
                        <div  class="z-div"> <span  class="z-label text-gray-900" >Số lương đơn/tháng (dự kiến)</span> </div>
                    </div>
                    <div class="input-group mb-3">
                      <input [ngClass]="{'is-valid': !quantityMonthArray.errors?.['required'] && !quantityMonthArray.errors?.['min']}"
                      type="text"  formControlName="quantityMonth" class="form-control"  maxlength="4">
                      <div class="input-group-append">
                        <span class="input-group-text" id="basic-addon2">Đơn</span>
                      </div>
                    </div>
                    <div *ngFor="let validation of updateCustomerMessage.quantityMonth">
                      <small class="text-danger"   *ngIf="updateCustomerForm.get('quantityMonth')?.hasError(validation.type) && updateCustomerForm.get('quantityMonth').touched">
                       {{validation.message}}</small>
                    </div>
                  </div>
            </div>
            <div  class="col-md-6 z-div">
                <div  class="z-vlayout" >
                    <div  class="z-vlayout-inner" style="padding-bottom:0">
                        <div  class="z-div"> <span  class="z-label text-gray-900">Trọng lượng/Bưu kiện (dự kiến)</span></div>
                    </div>
                    <div class="input-group mb-3">
                      <input [ngClass]="{'is-valid': !weightArray.errors?.['required'] && !weightArray.errors?.['min']}"
                      type="text" formControlName="weight"   class="form-control" maxlength="3">
                      <div class="input-group-append">
                        <span class="input-group-text" id="basic-addon2">Kg</span>
                      </div>
                    </div>
                    <div *ngFor="let validation of updateCustomerMessage.weight">
                      <small class="text-danger"   *ngIf="updateCustomerForm.get('weight')?.hasError(validation.type) && updateCustomerForm.get('weight').touched">
                       {{validation.message}}</small>
                    </div>
                  </div>
            </div>
        </div>


        <div  class="row z-div">
          <div  class="col-md-6 z-div">
              <div  class="z-vlayout" >
                  <div  class="z-vlayout-inner" style="padding-bottom:0">
                      <div  class="z-div"> <span  class="z-label text-gray-900">Doanh thu dự kiến</span> </div>
                  </div>
                  <div class="input-group mb-3">
                    <input [ngClass]="{'is-valid': !expectedRevenueArray.errors?.['required'] && !expectedRevenueArray.errors?.['min']}"
                     formControlName="expectedRevenue" class="form-control" type="text" appMoney >
                    <div class="input-group-append">
                      <span class="input-group-text" id="basic-addon2" >VNĐ</span>
                    </div>
                  </div>
                  <div *ngFor="let validation of updateCustomerMessage.expectedRevenue">
                    <small class="text-danger"   *ngIf="updateCustomerForm.get('expectedRevenue')?.hasError(validation.type) && updateCustomerForm.get('expectedRevenue').touched">
                     {{validation.message}}</small>
                  </div>
                </div>
          </div>
      </div>

          <ng-container formArrayName="address">
            <div  class="row z-div" *ngFor="let group of addressArray.controls; let i = index;" [formGroupName]="i">
              <div  class="col-md-6 z-div">
                  <div  class="z-vlayout" style="position: relative;" >
                      <div class="z-vlayout-inner" style="padding-bottom:0">
                          <div  class="z-div"> <span  class="z-label text-gray-900">Tỉnh/Thành phố</span> </div>
                      </div>
                      <ng-select   bindValue="provinceCode" [(ngModel)]="proviceSelect" (change)="getAllDistrict(proviceSelect)" [items]="dataProvince" bindLabel="provinceName" formControlName="province" >
                      </ng-select>
                      <i *ngIf="!addressArray.controls[i]?.get('province')?.hasError('required')" class="fas fa-check check" ></i>
                      <i *ngIf="addressArray.controls[i]?.get('province')?.hasError('required') && addressArray.controls[i]?.get('province').touched" class="fas fa-exclamation-circle check2" ></i>
              </div>
          </div>

          <div  class="col-md-6 z-div ">
              <div  class="z-vlayout " style="position: relative;">
                  <div  class="z-vlayout-inner" style="padding-bottom:0">
                      <div  class="z-div"> <span  class="z-label text-gray-900">Quận/Huyện</span> </div>
                  </div>
                  <ng-select   bindValue="districtCode" [(ngModel)]="districtSelect" (change)="getAllWard(districtSelect)" [items]="dataDistrict" bindLabel="districtName" formControlName="district" >
                  </ng-select>
                  <span *ngIf="!addressArray.controls[i]?.get('district')?.hasError('required')"><i class="fas fa-check check" ></i></span>
                  <i *ngIf="addressArray.controls[i]?.get('district')?.hasError('required') && addressArray.controls[i]?.get('district').touched" class="fas fa-exclamation-circle check2" ></i>

              </div>
          </div>
      </div>



      <div  class="row z-div  mt-3" *ngFor="let group of addressArray.controls; let i = index;" [formGroupName]="i">
          <div class="col-md-6 z-div" >
              <div  class="z-vlayout" style="position: relative;">
                  <div  class="z-vlayout-inner" style="padding-bottom:0">
                      <div  class="z-div" > <span  class="z-label text-gray-900">Phường/xã</span></div>
                  </div>
                  <ng-select   bindValue="wardCode" [(ngModel)]="wardSelect"  [items]="dataWard" bindLabel="wardName" formControlName="ward" >
                  </ng-select>
                  <span *ngIf="!addressArray.controls[i]?.get('ward')?.hasError('required')"><i class="fas fa-check check" ></i></span>
                  <i *ngIf="addressArray.controls[i]?.get('ward')?.hasError('required') && addressArray.controls[i]?.get('ward').touched" class="fas fa-exclamation-circle check2" ></i>
              </div>
          </div>
          <div class="col-md-6 z-div">
            <div  class="z-vlayout" >
                <div  class="z-vlayout-inner" style="padding-bottom:0">
                  <div class="z-div"> <span  class="z-label text-gray-900">Địa chỉ</span> </div>
                </div>
                <div class="z-vlayout-inner" >
                  <input [ngClass]="{'is-valid': !addressArray.controls[i]?.get('homeNo')?.hasError('required') && !addressArray.controls[i]?.get('homeNo')?.hasError('minlength')}"
                   formControlName="homeNo" class="form-control"  type="text" maxlength="100" placeholder="Nhập địa chỉ" ></div>
                <div *ngFor="let validation of updateCustomerMessage.homeNo">
                  <small class="text-danger"   *ngIf="addressArray.controls[i]?.get('homeNo')?.hasError(validation.type) && addressArray.controls[i]?.get('homeNo')?.touched">
                   {{validation.message}}</small>
                </div>
            </div>
        </div>
      </div>
          </ng-container>

            </div>
        </div>

    </div>
      <br>
      <div id="w1uPgg4" class="row z-div  mt-3">
        <div id="w1uPhg4" class="col-md-12 z-div">
            <div id="w1uPig4" style="float:right;" class="z-hlayout">
                <div id="w1uPkg4-chdex" class="z-hlayout-inner" ><button [disabled]="updateCustomerForm.invalid || industryError" type="submit"  class="btn btn-sm btn-success z-button">Cập nhật</button></div>
            </div>
        </div>
    </div>
  </div>
</form>


</div>
