
<ng-container *ngIf="loaderService.isLoading | async">
  <div class="lds-ripple"><div></div><div></div></div>
 </ng-container>

<div class="row" *ngFor="let item of leadData">

    <!-- Card Header - Dropdown -->
    <div
        class="card-header bg-gradient-primary d-flex flex-row align-items-center justify-content-between">
        <i style="font-size: 20px;" [routerLink]="['/client/customer']"   class="text-gray-100 fas fa-arrow-left"></i>
        <h3 class="m-0 text-gray-100 mr-2">KH{{item?.id}}</h3>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <h6 class="mt-2 text-gray-100"><i style="font-size: 20px;" class="fas fa-ellipsis-v"></i></h6>
            </a>
            <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item text-primary" (click)="onUpdate(item?.id)">Sửa thông tin</a>
                <a class="dropdown-item text-primary" (click)="onDelete(item?.id)">Xóa khách hàng</a>
            </div>
        </div>
    </div>


    <div class="card shadow mb-4 mt-4">
      <!-- Card Header - Dropdown -->
      <!-- Card Body -->
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between" style="background-color: white ;padding: 0 20px !important;">
        <h6 class="m-0 font-weight-bold" [ngClass]="{'text-warning': item?.status == 'CONTACTING' || item?.status == 'NEW'  , 'text-success' : item?.status == 'SUCCESS', 'text-danger' : item?.status == 'FAILED'}"
         style="font-size: 15px;">{{item?.statusDescription}}</h6>
        <div class="dropdown no-arrow">
          <a class="dropdown-toggle"  role="button" id="dropdownMenuLink"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <h5  class="mt-2" [ngClass]="{'text-info': item?.type == 'DUOC_GIAO', 'text-success' : item?.type == 'TU_NHAP' }" >{{item?.type == 'DUOC_GIAO'? 'Được giao':'Tự nhập'}}</h5>
          </a>
      </div>
      </div>
      <div class="card-body">

        <div class="h5 mb-0 text-gray-800 mt-2"><h4><i class="fas fa-home mr-2 text-primary"></i>{{item?.companyName}}</h4></div>
        <div class="h5 mb-0 text-gray-800 mt-2"><h4><i class="fas fa-map-marker-alt mr-2 ml-1 text-primary"></i>{{item?.address?.fomatAddress}}</h4> </div>
        <div class="h5 mb-0 text-gray-800 mt-2"><h4><i class="fas fa-user mr-2 ml-1 text-primary"></i>{{item?.representation}}</h4></div>
        <div class="h5 mb-0 text-gray-800 mt-2"><h4><i class="fas fa-phone-square-alt mr-2 ml-1 text-primary"></i>{{item?.phone | phone}}</h4></div>
        <div class="h5 mb-0 text-gray-800 mt-2"><h4><i class="fas fa-money-bill-wave mr-2 ml-1 text-primary"></i>Doanh thu dự kiến: <span style="font-size: 15px;" class="text-success">{{item?.expectedRevenue | money}}</span></h4></div>
        <div class="h5 mb-0 text-gray-800 mt-2"><h4><i class="fas fa-bullseye mr-2 ml-1 text-primary"></i>Sản phẩm kinh doanh: </h4></div>
        <ng-container *ngFor="let i of item?.industries">
          <div class="h5 mb-0 text-info mt-2"><h4> {{i?.name}}</h4></div>
        </ng-container>
      </div>
  </div>


  <div class="card  mb-4 ">
    <!-- Card Header - Dropdown -->

        <h3 class="m-0 font-weight-bold text-primary p-3"><i class="fas fa-history mr-2"></i>Lịch sử tiếp xúc</h3>

    <!-- Card Body -->
    <div class="mt-3 mb-3">
      <p-timeline [value]="events1" align="alternate" styleClass="customized-timeline">
        <ng-template pTemplate="marker" let-event>
            <span class="custom-marker p-shadow-2" [style.backgroundColor]="event.color">
            </span>
        </ng-template>
        <ng-template pTemplate="content" let-event>
          <small class="text-primary">{{event.status}}</small> -
          <small class="text-primary">{{event.date}}</small>
          <br>
          <br>
          <small class="mt-2"
           [ngClass]="{'text-danger': event.result == 1, 'text-success' : event.result == 3,'text-info' : event.result == 5 }"
           >{{event.result == 1?'Thất bại': event.result == 3?'Thành công':event.result == 5?'Gửi báo giá':''}}</small>

      </ng-template>

    </p-timeline>


    </div>
</div>

<br>
<br>
<br>
</div>
